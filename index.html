<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>internation School System</title>

<style>
body{font-family:sans-serif;background:#f2f6ff;padding:20px}
input,button,select{padding:5px;margin:3px}
table{border-collapse:collapse}
td,th{border:1px solid #999;padding:4px}
.hidden{display:none}
</style>
</head>

<body>

<h2>üè´ Rayongwit School System</h2>

<div id="home">
<button onclick="show('student')">‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</button>
<button onclick="show('adminLogin')">‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô</button>
</div>

<div id="student" class="hidden">
<h3>‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</h3>
‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà <select id="sid"></select>
<button onclick="studentLogin()">‡∏î‡∏π‡∏ú‡∏•</button>
<div id="result"></div>
</div>

<div id="adminLogin" class="hidden">
<h3>Admin Login</h3>
<input id="au" placeholder="user">
<input id="ap" placeholder="pass">
<button onclick="adminLogin()">Login</button>
</div>

<div id="adminPage" class="hidden"></div>

<script>

const subjects=["Math","Sci","Eng","Thai","Soc","Art","PE","IT","Hist","Geo","Bio","Phy","Chem"]

let students=[...Array(30)].map((_,i)=>({id:i+1,name:"Student "+(i+1)}))

let db=JSON.parse(localStorage.school||"{}")

students.forEach(s=>{
if(!db[s.id]) db[s.id]={}
subjects.forEach(sb=>{
if(!db[s.id][sb]) db[s.id][sb]={k:0,e:0}
})
})

localStorage.school=JSON.stringify(db)

sid.innerHTML=students.map(s=>`<option value=${s.id}>‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà ${s.id}</option>`)

function show(x){
["home","student","adminLogin","adminPage"].forEach(i=>document.getElementById(i).classList.add("hidden"))
document.getElementById(x).classList.remove("hidden")
}

function grade(x){
if(x>=80)return"A"
if(x>=70)return"B"
if(x>=60)return"C"
if(x>=50)return"D"
return"F"
}

function studentLogin(){
let id=sid.value
let t=0,c=0,h="<table><tr><th>‡∏ß‡∏¥‡∏ä‡∏≤</th><th>‡∏£‡∏ß‡∏°</th><th>‡πÄ‡∏Å‡∏£‡∏î</th></tr>"
subjects.forEach(s=>{
let k=db[id][s].k*0.3
let e=db[id][s].e*0.7
let sum=k+e
t+=sum;c++
h+=`<tr><td>${s}</td><td>${sum.toFixed(1)}</td><td>${grade(sum)}</td></tr>`
})
let gpa=(t/c/20).toFixed(2)
h+=`</table><h3>GPA ${gpa}</h3>`
result.innerHTML=h
}

function adminLogin(){
if(au.value=="admin"&&ap.value=="9999"){admin();show("adminPage")}
else alert("‡∏£‡∏´‡∏±‡∏™‡∏ú‡∏¥‡∏î")
}

function admin(){
let h="<h3>ADMIN</h3><table><tr><th>‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà</th>"
subjects.forEach(s=>h+=`<th>${s}</th>`)
h+="</tr>"
students.forEach(st=>{
h+=`<tr><td>${st.id}</td>`
subjects.forEach(sb=>{
let t=db[st.id][sb]
h+=`<td><input value=${t.k} onchange="set(${st.id},'${sb}','k',this.value)" size=2>
<input value=${t.e} onchange="set(${st.id},'${sb}','e',this.value)" size=2></td>`
})
h+="</tr>"
})
h+="</table>"
adminPage.innerHTML=h
}

function set(i,s,k,v){
db[i][s][k]=Number(v)
localStorage.school=JSON.stringify(db)
}

</script>
</body>
</html>